import{u as j,g as Z,h as ee,i as I,j as te,k as ie,t as ae,l as ue,m as S,n as H,p as le,q as U,s as i,v as E,x as F,R as T,y as se,z as re,A as ce,B as oe,C as ne,D as de,E as he,F as ge,G as me,H as pe,I as fe,J as ve,K as ye,L as A}from"./app-RheKRg4O.js";const ke=["/","/guide/FAQ.html","/guide/","/guide/upgrade.html","/zh/","/guide/cicd/1-drone.html","/guide/cicd/2-gitlab.html","/guide/cicd/3-gitea.html","/guide/basic-config/all_in_one.html","/guide/basic-config/configurations.html","/guide/basic-config/doge.html","/guide/basic-config/env_setting.html","/guide/basic-config/global_vars.html","/guide/basic-config/quickcmd.html","/guide/basic-config/simple-admin-tools.html","/guide/basic-config/standard.html","/guide/basic-config/web-setting.html","/guide/community-comp/1-pay.html","/guide/feature/authorization.html","/guide/feature/error_handling.html","/guide/feature/i18n.html","/guide/feature/jwt_blacklist.html","/guide/feature/log-collection.html","/guide/feature/oauth.html","/guide/feature/prometheus.html","/guide/feature/swagger.html","/guide/feature/tracing_analysis.html","/guide/feature/validator.html","/guide/official-comp/cron.html","/guide/official-comp/file_manager.html","/guide/official-comp/member.html","/guide/official-comp/message_center.html","/guide/official-comp/vip.html","/guide/quick-start/process.html","/zh/guide/FAQ.html","/zh/guide/","/zh/guide/upgrade.html","/guide/basic-config/k8s/k8s-deploy.html","/guide/basic-config/k8s/minikube.html","/guide/feature/MQ/asynq.html","/guide/feature/MQ/rocketmq.html","/guide/feature/ORM/ent.html","/guide/feature/ORM/gorm.html","/guide/feature/Plugins/mongo.html","/guide/quick-start/codegen/api_example.html","/guide/quick-start/codegen/rpc_example.html","/guide/quick-start/codegen/web_codegen.html","/guide/quick-start/core/quick_develop_example.html","/guide/quick-start/core/web_develop_example.html","/guide/quick-start/extra/1-i18n.html","/guide/quick-start/extra/2-api_init_code.html","/guide/quick-start/extra/3-ent_template.html","/guide/quick-start/extra/4-docker.html","/guide/quick-start/extra/5-makefile.html","/guide/quick-start/extra/6-info.html","/guide/quick-start/extra/7-proto2api.html","/guide/quick-start/extra/8-log_viewer.html","/zh/guide/basic-config/all_in_one.html","/zh/guide/basic-config/configurations.html","/zh/guide/basic-config/doge.html","/zh/guide/basic-config/env_setting.html","/zh/guide/basic-config/global_vars.html","/zh/guide/basic-config/quickcmd.html","/zh/guide/basic-config/simple-admin-tools.html","/zh/guide/basic-config/standard.html","/zh/guide/basic-config/web-setting.html","/zh/guide/cicd/1-drone.html","/zh/guide/cicd/2-gitlab.html","/zh/guide/cicd/3-gitea.html","/zh/guide/community-comp/1-pay.html","/zh/guide/feature/authorization.html","/zh/guide/feature/error_handling.html","/zh/guide/feature/i18n.html","/zh/guide/feature/jwt_blacklist.html","/zh/guide/feature/log-collection.html","/zh/guide/feature/oauth.html","/zh/guide/feature/prometheus.html","/zh/guide/feature/swagger.html","/zh/guide/feature/tracing_analysis.html","/zh/guide/feature/validator.html","/zh/guide/official-comp/cron.html","/zh/guide/official-comp/file_manager.html","/zh/guide/official-comp/member.html","/zh/guide/official-comp/message_center.html","/zh/guide/official-comp/vip.html","/zh/guide/quick-start/process.html","/zh/guide/basic-config/k8s/k8s-deploy.html","/zh/guide/basic-config/k8s/minikube.html","/zh/guide/feature/MQ/asynq.html","/zh/guide/feature/MQ/rocketmq.html","/zh/guide/feature/ORM/ent.html","/zh/guide/feature/ORM/gorm.html","/zh/guide/feature/Plugins/mongo.html","/zh/guide/quick-start/codegen/api_example.html","/zh/guide/quick-start/codegen/rpc_example.html","/zh/guide/quick-start/codegen/web_codegen.html","/zh/guide/quick-start/core/quick_develop_example.html","/zh/guide/quick-start/core/web_develop_example.html","/zh/guide/quick-start/extra/1-i18n.html","/zh/guide/quick-start/extra/2-api_init_code.html","/zh/guide/quick-start/extra/3-ent_template.html","/zh/guide/quick-start/extra/4-docker.html","/zh/guide/quick-start/extra/5-makefile.html","/zh/guide/quick-start/extra/6-info.html","/zh/guide/quick-start/extra/7-proto2api.html","/zh/guide/quick-start/extra/8-log_viewer.html","/404.html","/guide/cicd/","/guide/basic-config/","/guide/community-comp/","/guide/feature/","/guide/official-comp/","/guide/quick-start/","/guide/basic-config/k8s/","/guide/feature/MQ/","/guide/feature/ORM/","/guide/feature/Plugins/","/guide/quick-start/codegen/","/guide/quick-start/core/","/guide/quick-start/extra/","/zh/guide/basic-config/","/zh/guide/cicd/","/zh/guide/community-comp/","/zh/guide/feature/","/zh/guide/official-comp/","/zh/guide/quick-start/","/zh/guide/basic-config/k8s/","/zh/guide/feature/MQ/","/zh/guide/feature/ORM/","/zh/guide/feature/Plugins/","/zh/guide/quick-start/codegen/","/zh/guide/quick-start/core/","/zh/guide/quick-start/extra/"],ze="SEARCH_PRO_QUERY_HISTORY",g=j(ze,[]),qe=()=>{const{queryHistoryCount:a}=A,u=a>0;return{enabled:u,queryHistory:g,addQueryHistory:l=>{u&&(g.value.length<a?g.value=Array.from(new Set([l,...g.value])):g.value=Array.from(new Set([l,...g.value.slice(0,a-1)])))},removeQueryHistory:l=>{g.value=[...g.value.slice(0,l),...g.value.slice(l+1)]}}},C=a=>ke[a.id]+("anchor"in a?`#${a.anchor}`:""),be="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:M}=A,m=j(be,[]),_e=()=>{const a=M>0;return{enabled:a,resultHistory:m,addResultHistory:u=>{if(a){const l={link:C(u),display:u.display};"header"in u&&(l.header=u.header),m.value.length<M?m.value=[l,...m.value]:m.value=[l,...m.value.slice(0,M-1)]}},removeResultHistory:u=>{m.value=[...m.value.slice(0,u),...m.value.slice(u+1)]}}},xe=a=>{const u=ne(),l=I(),{search:b,terminate:d}=de(),f=S(!1),v=he([]);return ge(()=>{const p=()=>{v.value=[],f.value=!1},_=ye(y=>{f.value=!0,y?b({type:"search",query:y,locale:l.value,options:u}).then(h=>{v.value=h,f.value=!1}).catch(h=>{console.error(h),p()}):p()},A.searchDelay);U([a,l],()=>_(a.value),{immediate:!0}),me(()=>{d()})}),{searching:f,results:v}};var Qe=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:u}){const l=ee(),b=I(),d=te(ie),{enabled:f,addQueryHistory:v,queryHistory:p,removeQueryHistory:_}=qe(),{enabled:y,resultHistory:h,addResultHistory:O,removeResultHistory:B}=_e(),P=f||y,x=ae(a,"query"),{results:k,searching:Y}=xe(x),s=ue({isQuery:!0,index:0}),o=S(0),n=S(0),D=H(()=>P&&(p.value.length>0||h.value.length>0)),R=H(()=>k.value.length>0),Q=H(()=>k.value[o.value]||null),G=()=>{const{isQuery:e,index:t}=s;t===0?(s.isQuery=!e,s.index=e?h.value.length-1:p.value.length-1):s.index=t-1},J=()=>{const{isQuery:e,index:t}=s;t===(e?p.value.length-1:h.value.length-1)?(s.isQuery=!e,s.index=0):s.index=t+1},K=()=>{o.value=o.value>0?o.value-1:k.value.length-1,n.value=Q.value.contents.length-1},V=()=>{o.value=o.value<k.value.length-1?o.value+1:0,n.value=0},$=()=>{n.value<Q.value.contents.length-1?n.value+=1:V()},N=()=>{n.value>0?n.value-=1:K()},w=e=>e.map(t=>pe(t)?t:i(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=fe[e.index]||"$content",[r,q=""]=ve(t)?t[b.value].split("$content"):t.split("$content");return e.display.map(c=>i("div",w([r,...c,q])))}return e.display.map(t=>i("div",w(t)))},z=()=>{o.value=0,n.value=0,u("updateQuery",""),u("close")};return le("keydown",e=>{if(a.isFocusing){if(R.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")$();else if(e.key==="Enter"){const t=Q.value.contents[n.value];v(a.query),O(t),l.push(C(t)),z()}}else if(y){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:t}=s;s.isQuery?(u("updateQuery",p.value[t]),e.preventDefault()):(l.push(h.value[t].link),z())}}}}),U([o,n],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["search-pro-result-wrapper",{empty:x.value?!R.value:!D.value}],id:"search-pro-results"},x.value===""?P?D.value?[f?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},d.value.queryHistory),p.value.map((e,t)=>i("div",{class:["search-pro-result-item",{active:s.isQuery&&s.index===t}],onClick:()=>{u("updateQuery",e)}},[i(E,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},e),i("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:r=>{r.preventDefault(),r.stopPropagation(),_(t)}})]))])):null,y?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},d.value.resultHistory),h.value.map((e,t)=>i(T,{to:e.link,class:["search-pro-result-item",{active:!s.isQuery&&s.index===t}],onClick:()=>{z()}},()=>[i(E,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[e.header?i("div",{class:"content-header"},e.header):null,i("div",e.display.map(r=>w(r)).flat())]),i("button",{class:"search-pro-remove-icon",innerHTML:F,onClick:r=>{r.preventDefault(),r.stopPropagation(),B(t)}})]))])):null]:d.value.emptyHistory:d.value.emptyResult:Y.value?i(se,{hint:d.value.searching}):R.value?i("ul",{class:"search-pro-result-list"},k.value.map(({title:e,contents:t},r)=>{const q=o.value===r;return i("li",{class:["search-pro-result-list-item",{active:q}]},[i("div",{class:"search-pro-result-title"},e||d.value.defaultTitle),t.map((c,X)=>{const L=q&&n.value===X;return i(T,{to:C(c),class:["search-pro-result-item",{active:L,"aria-selected":L}],onClick:()=>{v(a.query),O(c),z()}},()=>[c.type==="text"?null:i(c.type==="title"?re:c.type==="heading"?ce:oe,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?i("div",{class:"content-header"},c.header):null,i("div",W(c))])])})])})):d.value.emptyResult)}});export{Qe as default};
